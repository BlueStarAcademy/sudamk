# Railway 리소스 최대 설정 가이드

## 현재 문제
- 서버가 계속 크래시하고 있음
- CPU와 메모리 리소스가 부족할 가능성

## Railway Dashboard에서 리소스 최대 설정하기

### 1. Railway Dashboard 접속
1. https://railway.app 접속
2. 프로젝트 선택
3. **Sudam1** 서비스 선택

### 2. Settings 탭으로 이동
1. 상단 메뉴에서 **Settings** 탭 클릭
2. **Resource Limits** 섹션 찾기

### 3. CPU 및 메모리 최대 설정
**Resource Limits** 섹션에서:

#### CPU 설정
- 슬라이더를 최대한 오른쪽으로 이동
- **최대: 32 vCPU** (플랜 한도)
- 현재 설정을 **32 vCPU**로 변경

#### Memory 설정
- 슬라이더를 최대한 오른쪽으로 이동
- **최대: 32 GB** (플랜 한도)
- 현재 설정을 **32 GB**로 변경

### 4. 저장 및 재배포
1. **Save** 버튼 클릭
2. 변경사항이 자동으로 적용됨
3. 서비스가 자동으로 재배포됨

## 주의사항

### 비용
- CPU와 메모리를 최대로 설정하면 **비용이 크게 증가**합니다
- Railway 요금제에 따라 추가 비용이 발생할 수 있습니다
- 현재 플랜의 한도 내에서만 설정 가능합니다

### 권장 설정 (비용 절감)
완전히 최대로 설정하기 전에, 다음 설정을 먼저 시도해보세요:

#### 중간 설정 (권장)
- **CPU: 8 vCPU** (현재 4 vCPU에서 2배 증가)
- **Memory: 16 GB** (현재 8 GB에서 2배 증가)

이 설정으로도 대부분의 크래시 문제가 해결될 수 있습니다.

#### 최대 설정 (최종)
- **CPU: 32 vCPU**
- **Memory: 32 GB**

## 설정 확인 방법

### 1. Settings 탭에서 확인
- **Resource Limits** 섹션에서 현재 설정 확인
- 슬라이더 위치로 설정값 확인

### 2. Metrics 탭에서 모니터링
1. **Metrics** 탭 클릭
2. **CPU Usage** 그래프 확인
3. **Memory Usage** 그래프 확인
4. 리소스 사용량이 여유가 있는지 확인

## 추가 최적화

리소스를 늘린 후에도 크래시가 발생하면:

### 1. 로그 확인
- **Deployments** 탭 → 최신 배포 → **View Logs**
- `[FATAL]`, `[Memory]`, `[Cache]` 메시지 확인
- 에러 메시지 확인

### 2. 데이터베이스 연결 확인
- PostgreSQL 서비스가 정상 실행 중인지 확인
- `DATABASE_URL` 환경 변수가 올바른지 확인

### 3. 코드 최적화
- 메모리 누수 확인
- 캐시 크기 조정
- 데이터베이스 쿼리 최적화

## 빠른 설정 방법

1. Railway Dashboard → Sudam1 → Settings
2. Resource Limits 섹션 찾기
3. CPU 슬라이더를 **32 vCPU**로 이동
4. Memory 슬라이더를 **32 GB**로 이동
5. **Save** 클릭
6. 자동 재배포 대기 (약 1-2분)

## 예상 결과

리소스를 최대로 설정한 후:
- ✅ 메모리 부족으로 인한 크래시 감소
- ✅ CPU 부족으로 인한 응답 지연 감소
- ✅ 더 많은 동시 사용자 지원 가능
- ✅ 서버 안정성 향상

## 비용 관리

리소스를 최대로 설정하면 비용이 증가하므로:
1. 먼저 **중간 설정 (8 vCPU, 16 GB)**으로 시도
2. 문제가 해결되면 그대로 유지
3. 여전히 문제가 있으면 최대 설정으로 증가

## 문제 해결

리소스를 최대로 설정해도 크래시가 계속되면:
1. Railway 로그에서 에러 메시지 확인
2. 데이터베이스 연결 상태 확인
3. 코드 레벨의 메모리 누수 확인
4. Railway 지원팀에 문의
