# Git 워크플로우 가이드

## 문제 원인
1. **히스토리 분기**: 로컬과 원격의 커밋 히스토리가 분기되어 있음
2. **원격 추적 정보 불일치**: 로컬이 원격의 최신 상태를 제대로 추적하지 못함
3. **이전 force push**: 히스토리가 꼬여있을 가능성

## 해결 방법

### 1. 푸시 전 항상 원격 변경사항 확인
```powershell
git fetch origin
git status
```

### 2. 원격에 변경사항이 있으면 먼저 가져오기
```powershell
git pull origin main
# 또는
git pull origin main --no-rebase
```

### 3. 충돌 해결 후 푸시
```powershell
# 충돌 해결 후
git add .
git commit -m "커밋 메시지"
git push origin main
```

## 권장 워크플로우

### 매일 작업 시작 전
```powershell
git fetch origin
git pull origin main
```

### 작업 후 푸시 전
```powershell
# 1. 현재 상태 확인
git status

# 2. 원격 변경사항 가져오기
git fetch origin

# 3. 원격과 차이 확인
git log HEAD..origin/main --oneline

# 4. 원격에 변경사항이 있으면 pull
git pull origin main

# 5. 충돌 해결 (필요시)
# 6. 푸시
git push origin main
```

## 설정된 Git 옵션
- `pull.rebase = false`: pull 시 merge 방식 사용
- `push.default = simple`: 안전한 푸시 설정
- `branch.main.remote = origin`: 원격 저장소 추적 설정

## 문제 발생 시

### 히스토리 분기 문제
```powershell
# 1. 원격 최신 정보 가져오기
git fetch origin --prune

# 2. 로컬을 원격과 동기화 (주의: 로컬 변경사항 손실 가능)
git reset --hard origin/main

# 3. 로컬 변경사항 다시 적용 (필요시)
git cherry-pick <커밋해시>
```

### 강제 푸시가 필요한 경우 (주의!)
```powershell
# 안전한 강제 푸시 (원격이 변경되지 않았을 때만)
git push origin main --force-with-lease

# 위가 안 되면 (위험: 원격 변경사항 덮어씀)
git push origin main --force
```
